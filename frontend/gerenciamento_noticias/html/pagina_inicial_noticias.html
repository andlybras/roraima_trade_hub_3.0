{% extends 'base.html' %}
{% load static %}

{% block titulo %}Notícias | Roraima Trade Hub{% endblock %}

{% block css_pagina %}
    <link rel="stylesheet" href="{% static 'gerenciamento_noticias/css/noticias.css' %}">
{% endblock %}

{% block conteudo %}
<div class="container-conteudo layout-noticias">
    {% if banner %}
    <section class="noticias-banner-topo">
    {% if banner %}
        {% if banner.tipo_conteudo == 'IMAGEM_TEXTO' and banner.imagem_fundo %}
            <div class="banner-fundo" style="background-image: url('{{ banner.imagem_fundo.url }}');"></div>
            <div class="banner-conteudo">
                <h1>{{ banner.titulo }}</h1>
                {% if banner.subtitulo %}<p>{{ banner.subtitulo }}</p>{% endif %}
            </div>
        {% elif banner.tipo_conteudo == 'TEXTO_ESTATICO' %}
            <div class="banner-conteudo texto-estatico">
                <h1>{{ banner.titulo }}</h1>
                {% if banner.subtitulo %}<p>{{ banner.subtitulo }}</p>{% endif %}
            </div>
        {% elif banner.tipo_conteudo == 'ANIMACAO_JS' %}
            <div id="banner-animacao-container" style="width: 100%; height: 100%;">
                </div>
            <script>
                {{ banner.codigo_js|safe }}
            </script>
        {% endif %}
    {% endif %}
    </section>
    {% endif %}
    <section class="noticias-secao-meio">
        <div class="destaques-container">
            <div id="destaques-carousel">
                {% for destaque in destaques %}
                <a href="{% url 'noticias:detalhe_noticia' destaque.noticia.slug %}" class="destaque-slide {% if forloop.first %}active{% endif %}">
                    <img src="{{ destaque.noticia.imagem_card.url }}" alt="{{ destaque.noticia.titulo }}">
                    <div class="destaque-titulo">
                        <span>DESTAQUE</span>
                        <h3>{{ destaque.noticia.titulo }}</h3>
                    </div>
                </a>
                {% endfor %}
            </div>
            <button id="prev-btn">&lt;</button>
            <button id="next-btn">&gt;</button>
        </div>
        <aside class="categorias-container">
            <h4 class="titulo-secao-lateral">TÓPICOS</h4>
            
            <ul class="lista-categorias">
                {% for categoria in categorias %}
                    <li><a href="{% url 'noticias:noticias_por_categoria' categoria.slug %}">{{ categoria.nome }}</a></li>
                {% endfor %}
            </ul>
            <div class="busca-container">
                <form method="get" action="{% url 'noticias:busca_noticias' %}">
                    <input type="search" name="q" placeholder="Buscar notícias..." required>
                    <button type="submit">Buscar</button>
                </form>
            </div>
        </aside>
    </section>

    <section class="noticias-secao-inferior">
        <h3 class="titulo-secao-principal">ÚLTIMAS NOTÍCIAS</h3>
        <div class="noticias-grid" id="lista-noticias-grid">
            {% include 'gerenciamento_noticias/html/partials/noticia_card.html' with noticias=page_obj %}
        </div>
        
        {% if page_obj.has_next %}
        <div class="paginacao-container">
            <button id="carregar-mais-btn" class="botao-acao">Carregar Mais Notícias</button>
        </div>
        {% endif %}
    </section>
</div>
{% endblock %}

{% block js_pagina %}
    <script src="{% static 'gerenciamento_noticias/js/noticias.js' %}"></script>
{% endblock %}